{"version":3,"sources":["webpack:///./src/views/infiniteScroll/module.vue?5882","webpack:///src/views/infiniteScroll/module.vue","webpack:///./src/views/infiniteScroll/module.vue?9cb3","webpack:///./src/views/infiniteScroll/module.vue","webpack:///./src/views/infiniteScroll/module.vue?9218","webpack:///./src/components/infiniteScroll/index.vue?c27c","webpack:///./src/views/infiniteScroll/module.vue?2fe2","webpack:///./src/views/infiniteScroll/module.vue?5518","webpack:///./src/components/infiniteScroll/index.vue?6987","webpack:///./src/components/infiniteScroll/index.vue?90f2","webpack:///src/components/infiniteScroll/index.vue","webpack:///./src/components/infiniteScroll/index.vue?461f","webpack:///./src/components/infiniteScroll/index.vue","webpack:///./src/components/infiniteScroll/index.vue?aba4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","empty","failed","finished","on","load","refresh","model","value","callback","$$v","loading","expression","tag","name","_l","item","key","id","_v","_s","staticRenderFns","count","getUsers","query","Promise","resolve","data","records","pages","total","nums","offset","limit","push","setTimeout","Math","random","modulevue_type_script_lang_js_","components","InfiniteScroll","infiniteScroll","items","methods","fetchData","_this","then","_ref","concat","catch","failure","done","infiniteScroll_modulevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_vue_style_loader_index_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_module_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_vue_style_loader_index_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_module_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","exports","module","i","content","locals","add","default","sourceMap","shadowMode","pullRefresh","ref","disabled","isLoading","refreshing","_t","directives","rawName","size","click","infiniteScrollvue_type_script_lang_js_","PullRefresh","Loading","props","type","Boolean","required","Number","watch","handler","immediate","mounted","bind","activated","deactivated","unbind","beforeDestroy","isBind","$nextTick","onscroll","debouncer","scrollHandler","scrollEl","$refs","shared","$el","container","shouldLoadMore","bottom","getBoundingClientRect","height","$emit","_this2","components_infiniteScrollvue_type_script_lang_js_","_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_postcss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_vue_style_loader_index_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_2_node_modules_postcss_loader_src_index_js_ref_7_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_postcss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-5fbe524a.09a94aaa.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('InfiniteScroll',{staticClass:\"page-infinite-scroll\",attrs:{\"empty\":_vm.empty,\"failed\":_vm.failed,\"finished\":_vm.finished},on:{\"load\":_vm.load,\"refresh\":_vm.refresh},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('transition-group',{staticClass:\"items\",attrs:{\"tag\":\"ul\",\"name\":\"item\"}},_vm._l((_vm.items),function(item){return _c('li',{key:item.id,staticClass:\"item\"},[_vm._v(\"\\n      \"+_vm._s(item.value)+\"\\n    \")])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <InfiniteScroll\n    class=\"page-infinite-scroll\"\n    v-model=\"loading\"\n    :empty=\"empty\"\n    :failed=\"failed\"\n    :finished=\"finished\"\n    @load=\"load\"\n    @refresh=\"refresh\"\n  >\n    <transition-group class=\"items\" tag=\"ul\" name=\"item\">\n      <li class=\"item\" v-for=\"item in items\" :key=\"item.id\">\n        {{ item.value }}\n      </li>\n    </transition-group>\n  </InfiniteScroll>\n</template>\n\n<script>\nimport InfiniteScroll from '../../components/infiniteScroll'\n\nlet count = 0\n\nfunction getUsers(query) {\n  return new Promise(resolve => {\n    const data = { records: [], pages: 3, total: 45 }\n    let nums = 0\n    if (query.offset === 1) {\n      count = 0\n    }\n    while (nums < query.limit) {\n      nums++\n      count++\n      data.records.push({ id: count, value: count })\n    }\n    setTimeout(() => resolve(data), ~~(Math.random() * 100 + 500))\n  })\n}\n\nexport default {\n  components: {\n    InfiniteScroll\n  },\n  data() {\n    return {\n      items: [],\n      query: {\n        offset: 1,\n        limit: 15\n      },\n      loading: true,\n      finished: false,\n      failed: false,\n      empty: false\n    }\n  },\n  methods: {\n    fetchData() {\n      this.failed = false\n      return getUsers(this.query)\n        .then(({ records, pages, total }) => {\n          // loading 为真的时候是加载更多，否则为下拉刷新操作\n          this.items = this.loading ? this.items.concat(records) : records\n          // 没有数据\n          this.empty = !total\n          // 是否为最后一页\n          this.finished = this.query.offset >= pages\n          this.query.offset++\n        })\n        .catch(this.failure)\n    },\n    load(done) {\n      this.fetchData().then(done)\n    },\n    refresh(done) {\n      this.query.offset = 1\n      this.fetchData().then(done)\n    },\n    failure() {\n      this.failed = true\n    }\n  }\n}\n</script>\n\n<style>\n.page-infinite-scroll {\n  padding-bottom: 10px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./module.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./module.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./module.vue?vue&type=template&id=12844c64&\"\nimport script from \"./module.vue?vue&type=script&lang=js&\"\nexport * from \"./module.vue?vue&type=script&lang=js&\"\nimport style0 from \"./module.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./module.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./module.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".v-infinite-scroll-footer{width:100%;height:50px;text-align:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.v-infinite-scroll-empty,.v-infinite-scroll-footer{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.v-infinite-scroll-empty{min-height:400px}.v-infinite-scroll-loading{color:#d9d9d9}\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./module.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"33f98242\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".page-infinite-scroll{padding-bottom:10px}\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0f51879c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.pullRefresh ? 'PullRefresh' : 'div',{ref:\"pullRefresh\",tag:\"component\",attrs:{\"failed\":_vm.failed,\"disabled\":_vm.isLoading},on:{\"refresh\":_vm.refresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('div',{ref:\"container\",staticClass:\"v-infinite-scroll\"},[_vm._t(\"default\")],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.value),expression:\"value\"}],staticClass:\"v-infinite-scroll-footer\"},[_vm._t(\"loading\",[_c('Loading',{staticClass:\"v-infinite-scroll-loading\",attrs:{\"size\":\"32\"}})])],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.finished && !_vm.empty),expression:\"finished && !empty\"}],staticClass:\"v-infinite-scroll-footer\"},[_vm._t(\"finished\",[_vm._v(\"全部加载完成\")])],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.empty),expression:\"empty\"}],staticClass:\"v-infinite-scroll-footer\"},[_vm._t(\"empty\",[_c('div',{staticClass:\"v-infinite-scroll-empty\"},[_vm._v(\"空空如也\")])])],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.failed),expression:\"failed\"}],staticClass:\"v-infinite-scroll-footer\",on:{\"click\":_vm.load}},[_vm._t(\"failed\",[_vm._v(\"加载失败,点击重试\")])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <component\n    :is=\"pullRefresh ? 'PullRefresh' : 'div'\"\n    :failed=\"failed\"\n    :disabled=\"isLoading\"\n    ref=\"pullRefresh\"\n    v-model=\"refreshing\"\n    @refresh=\"refresh\"\n  >\n    <div class=\"v-infinite-scroll\" ref=\"container\"><slot /></div>\n    <!-- 加载中 -->\n    <div class=\"v-infinite-scroll-footer\" v-show=\"value\">\n      <slot name=\"loading\">\n        <Loading class=\"v-infinite-scroll-loading\" size=\"32\" />\n      </slot>\n    </div>\n    <!-- 全部加载完成 -->\n    <div class=\"v-infinite-scroll-footer\" v-show=\"finished && !empty\">\n      <slot name=\"finished\">全部加载完成</slot>\n    </div>\n    <!-- 空空如也 -->\n    <div class=\"v-infinite-scroll-footer\" v-show=\"empty\">\n      <slot name=\"empty\">\n        <div class=\"v-infinite-scroll-empty\">空空如也</div>\n      </slot>\n    </div>\n    <!-- 加载失败 -->\n    <div class=\"v-infinite-scroll-footer\" v-show=\"failed\" @click=\"load\">\n      <slot name=\"failed\">加载失败,点击重试</slot>\n    </div>\n  </component>\n</template>\n\n<script>\nimport PullRefresh from '../../components/pullRefresh'\nimport Loading from '../../components/loading'\nimport Debouncer from '../../utils/debouncer'\nimport {\n  addListener,\n  removeListener,\n  getScrollEventTarget,\n  view\n} from '../../utils/shared'\n\nexport default {\n  name: 'InfiniteScroll',\n  components: {\n    PullRefresh,\n    Loading\n  },\n  props: {\n    value: {\n      type: Boolean,\n      required: true\n    },\n    // 加载完成 (不再滚动触发加载数据)\n    finished: {\n      type: Boolean,\n      default: false\n    },\n    // 加载失败\n    failed: {\n      type: Boolean,\n      default: false\n    },\n    // 首次加载时没有数据的状态\n    empty: {\n      type: Boolean,\n      default: false\n    },\n    offset: {\n      type: Number,\n      default: 300\n    },\n    // 是否内置下拉刷新功能\n    pullRefresh: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      refreshing: false,\n      isLoading: false\n    }\n  },\n  watch: {\n    value: {\n      handler: function(value) {\n        value && this.load()\n      },\n      immediate: true\n    }\n  },\n  mounted() {\n    this.bind()\n  },\n  activated() {\n    this.bind()\n  },\n  deactivated() {\n    this.unbind()\n  },\n  beforeDestroy() {\n    this.unbind()\n  },\n  methods: {\n    bind() {\n      if (this.isBind) return\n      this.$nextTick(() => {\n        this.onscroll = new Debouncer(this.scrollHandler)\n        this.scrollEl = this.pullRefresh\n          ? this.$refs.pullRefresh.scrollEl\n          : getScrollEventTarget(this.$el)\n        this.container = this.$refs.container\n        addListener(this.scrollEl, 'scroll', this.onscroll)\n      })\n      this.isBind = true\n    },\n    unbind() {\n      removeListener(this.scrollEl, 'scroll', this.onscroll)\n      this.isBind = false\n      this.scrollEl = null\n      this.container = null\n      this.onscroll = null\n    },\n    scrollHandler() {\n      if (this.shouldLoadMore()) {\n        this.load()\n      }\n    },\n    shouldLoadMore() {\n      if (this.finished || this.value || this.failed) return false\n      const bottom = this.container.getBoundingClientRect().bottom\n      return bottom - view.height() <= this.offset\n    },\n    load() {\n      if (this.finished) {\n        this.done()\n        return\n      }\n      // 保证有序加载，同一时间只执行一个操作\n      if (this.isLoading || this.refreshing) return\n      this.isLoading = true\n      this.$emit('input', true)\n      this.$emit('load', this.done)\n    },\n    refresh(done) {\n      this.$emit('refresh', done)\n    },\n    done() {\n      this.$nextTick(() => {\n        this.$emit('input', false)\n        this.isLoading = false\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"postcss\">\n.v-infinite-scroll-footer {\n  width: 100%;\n  height: 50px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.v-infinite-scroll-empty {\n  min-height: 400px;\n  display: flex;\n  align-items: center;\n}\n.v-infinite-scroll-loading {\n  color: var(--textSecondary);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8c34a206&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\""],"sourceRoot":""}